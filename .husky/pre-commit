echo "ğŸ§¹ Running pre-commit checks..."

# Run linting and automatically fix issues
echo "ğŸ” Running lint:fix..."
bun run lint:fix
if [ $? -ne 0 ]; then
    echo "âŒ Linting errors detected. Please fix them before committing."
    exit 1
fi

# Run formatting and automatically fix issues
echo "âœ¨ Running format:fix..."
bun run format:fix
if [ $? -ne 0 ]; then
    echo "âŒ Formatting errors detected. Please fix them before committing."
    exit 1
fi

# Stage changes made by Prettier
echo "ğŸ“‚ Staging formatting changes..."
git add .

# Ensure there are staged changes before proceeding
if git diff --cached --quiet; then
    echo "âŒ No changes to commit."
    exit 1
fi

echo "âœ… All pre-commit checks passed! ğŸ‰"
exit 0
